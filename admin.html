<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 50%, #0d1117 100%);
            min-height: 100vh;
            color: #ffffff;
            padding: 40px 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 32px;
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .card {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.9) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
        }

        .card h2 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #60a5fa;
        }

        .link-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(59, 130, 246, 0.4);
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: #60a5fa;
            text-align: center;
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            min-height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            color: #e5e7eb;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            margin-bottom: 20px;
        }

        textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            width: 100%;
            justify-content: center;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(34, 197, 94, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e5e7eb;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .instructions {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.8;
        }

        .instructions strong {
            color: #60a5fa;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: rgba(34, 197, 94, 0.15);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #4ade80;
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #f87171;
        }

        pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 12px;
            color: #9ca3af;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öôÔ∏è Dashboard Admin</h1>
            <p style="color: #6b7280;">Atualize os dados da TV Corporativa</p>
        </div>

        <div id="alertBox" class="alert"></div>

        <div class="card">
            <h2>üì∫ Link da TV</h2>
            <div class="link-box">
                https://dashvendasyourh.netlify.app/
            </div>
            <button class="btn btn-secondary" onclick="verTV()">üëÅÔ∏è Visualizar TV</button>
        </div>

        <div class="card">
            <h2>üìù Editor de Dados</h2>
            
            <div class="instructions">
                <strong>Como funciona:</strong><br>
                1. Edite o JSON abaixo com seus dados<br>
                2. Clique em <strong>"üíæ Salvar e Atualizar TV"</strong><br>
                3. O arquivo ser√° baixado automaticamente<br>
                4. <strong>Fa√ßa upload do arquivo dados.json no seu GitHub</strong><br>
                5. A TV atualiza em 1-2 minutos automaticamente!
            </div>

            <textarea id="jsonInput"></textarea>
            
            <button class="btn btn-primary" onclick="salvarDados()">
                üíæ Salvar e Atualizar TV
            </button>
            
            <button class="btn btn-secondary" onclick="carregarExemplo()">
                üìã Carregar Exemplo
            </button>
            
            <button class="btn btn-secondary" onclick="carregarAtual()">
                üîÑ Recarregar Atual
            </button>
        </div>

        <div class="card">
            <h2>üìã Estrutura do JSON</h2>
            <pre>{
  "mes": "Fevereiro 2026",
  "nmrr": { "atual": 9000, "meta": 32000, "variacao": 990 },
  "vendas": { "atual": 4, "meta": 20, "variacao": 2 },
  "conversao": { "atual": 12.5, "meta": 22, "variacao": 4.17 },
  "pipelineMorno": { "valor": 11313.8, "meta": 32000 },
  "pipelineQuente": { "valor": 6514.26, "meta": 32000 },
  "agendas": { "atual": 59, "meta": 178 },
  "sqlsInbound": { "atual": 35, "meta": 120 },
  "sqlsOutbound": { "atual": 14, "meta": 36 },
  "mensagem": "Pipeline aquecendo! Hora de transformar oportunidades!"
}</pre>
        </div>
    </div>

    <script>
        // Carregar dados atuais ao abrir
        window.onload = async function() {
            await carregarAtual();
        };

        function showAlert(mensagem, tipo) {
            const alert = document.getElementById('alertBox');
            alert.textContent = mensagem;
            alert.className = 'alert alert-' + tipo + ' show';
            setTimeout(() => alert.classList.remove('show'), 5000);
        }

        function verTV() {
            window.open('https://dashvendasyourh.netlify.app/', '_blank');
        }

        async function carregarAtual() {
            try {
                const response = await fetch('dados.json?t=' + Date.now());
                if (response.ok) {
                    const dados = await response.json();
                    document.getElementById('jsonInput').value = JSON.stringify(dados, null, 2);
                    showAlert('‚úÖ Dados atuais carregados!', 'success');
                } else {
                    throw new Error('Arquivo n√£o encontrado');
                }
            } catch (e) {
                showAlert('‚ö†Ô∏è Usando exemplo. Salve para criar o primeiro arquivo.', 'error');
                carregarExemplo();
            }
        }

        function carregarExemplo() {
            const exemplo = {
                mes: "Fevereiro 2026",
                nmrr: { atual: 172450, meta: 210000, variacao: 15000 },
                vendas: { atual: 52, meta: 65, variacao: 8 },
                conversao: { atual: 28.7, meta: 32, variacao: 5.2 },
                pipelineMorno: { valor: 384920, meta: 550000 },
                pipelineQuente: { valor: 267300, meta: 520000 },
                agendas: { atual: 145, meta: 200 },
                sqlsInbound: { atual: 89, meta: 150 },
                sqlsOutbound: { atual: 34, meta: 80 },
                mensagem: "Estamos acelerando forte! Mantendo esse ritmo, a meta fica totalmente alcan√ß√°vel."
            };
            document.getElementById('jsonInput').value = JSON.stringify(exemplo, null, 2);
        }

        function salvarDados() {
            const input = document.getElementById('jsonInput').value.trim();
            
            if (!input) {
                showAlert('‚ùå Cole o JSON primeiro!', 'error');
                return;
            }

            try {
                // Validar JSON
                const dados = JSON.parse(input);
                
                // Validar campos obrigat√≥rios
                if (!dados.mes || !dados.nmrr || !dados.vendas) {
                    throw new Error('JSON incompleto. Verifique a estrutura.');
                }

                // Criar arquivo para download
                const blob = new Blob([JSON.stringify(dados, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'dados.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                showAlert('‚úÖ Arquivo baixado! Agora suba ele no GitHub (arraste o arquivo na pasta do repo)', 'success');

            } catch (e) {
                showAlert('‚ùå Erro: ' + e.message, 'error');
            }
        }

        // Ctrl+Enter para salvar
        document.getElementById('jsonInput').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                salvarDados();
            }
        });
    </script>
</body>
</html>
